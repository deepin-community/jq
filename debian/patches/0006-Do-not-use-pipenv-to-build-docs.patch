From: =?utf-8?b?IkNoYW5nWmh1byBDaGVuICjpmbPmmIzlgKwpIg==?=
 <czchen@debian.org>
Date: Wed, 13 Sep 2023 01:23:14 +0800
Subject: Do not use pipenv to build docs

---
 Makefile.am  |  8 ++++----
 configure.ac | 25 -------------------------
 2 files changed, 4 insertions(+), 29 deletions(-)

diff --git a/Makefile.am b/Makefile.am
index d4c6bbb..60563e6 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -161,8 +161,8 @@ check_DATA = tests/man.test
 tests/man.test tests/manonig.test: $(srcdir)/docs/content/manual/dev/manual.yml
 if ENABLE_DOCS
 	$(AM_V_GEN) ( cd ${abs_srcdir}/docs && \
-	  $(PIPENV) run python validate_manual_schema.py content/manual/dev/manual.yml && \
-	  $(PIPENV) run python build_mantests.py )
+		python3 validate_manual_schema.py content/manual/manual.yml && \
+		python3 build_mantests.py )
 else
 	@echo Changes to the manual.yml require docs to be enabled to update the manual test.
 	@echo As a result, the manual test is out of date.
@@ -177,8 +177,8 @@ man_MANS = jq.1
 jq.1.prebuilt: $(srcdir)/docs/content/manual/dev/manual.yml
 if ENABLE_DOCS
 	$(AM_V_GEN) ( cd ${abs_srcdir}/docs && \
-	  $(PIPENV) run python validate_manual_schema.py content/manual/dev/manual.yml && \
-	  $(PIPENV) run python build_manpage.py ) > $@
+		python3 validate_manual_schema.py content/manual/manual.yml && \
+		python3 build_manpage.py ) > $@
 else
 	@echo Changes to the manual.yml require docs to be enabled to update the manpage.
 	@echo As a result, the manpage is out of date.
diff --git a/configure.ac b/configure.ac
index bc1d273..f90b09f 100644
--- a/configure.ac
+++ b/configure.ac
@@ -75,31 +75,6 @@ dnl Enable building all static
 AC_ARG_ENABLE([all-static],
    AS_HELP_STRING([--enable-all-static],[link jq with static libraries only]))
 
-dnl find pipenv
-AC_ARG_VAR([PIPENV], [pipenv command])
-AC_CHECK_PROGS([PIPENV], pipenv)
-
-AS_IF([test "x$enable_docs" != "xno"],[
-   AC_CACHE_CHECK([for Python dependencies], [jq_cv_python_deps],[
-      jq_cv_python_deps=yes
-      AS_IF([test "x$PIPENV" = "x" || \
-      ! bmsg="`cd ${srcdir}/docs; LC_ALL=$LANG "$PIPENV" --venv`"],[
-         jq_cv_python_deps=no
-      ])
-   ])
-
-   AS_IF([test "x$jq_cv_python_deps" != "xyes"], [
-      AC_MSG_WARN([Error checking python dependencies: $bmsg
-*****************************************************************
-*  Python dependencies for building jq documentation not found. *
-*  You can still build, install and hack on jq, but the manpage *
-*  will not be rebuilt and new manpage tests will not be run.   *
-*  See docs/README.md for how to install the docs dependencies. *
-*****************************************************************])
-      enable_docs=no
-   ])
-])
-
 dnl Disable decNumber support
 AC_ARG_ENABLE([decnum],
    AS_HELP_STRING([--disable-decnum],[disable decnum support]))
